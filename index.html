<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSA Experiments - Interactive Code Viewer</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />

    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .code-pattern {
            background-image:
                linear-gradient(135deg, #667eea 0%, #764ba2 100%),
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 10px,
                    rgba(255,255,255,.03) 10px,
                    rgba(255,255,255,.03) 20px
                );
        }

        .card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #1e1e1e;
            margin: auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            max-height: 85vh;
            overflow: hidden;
            animation: slideIn 0.3s;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 0;
            max-height: calc(85vh - 80px);
            overflow-y: auto;
        }

        .close {
            color: white;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            line-height: 1;
        }

        .close:hover {
            transform: scale(1.2);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        pre[class*="language-"] {
            margin: 0;
            border-radius: 0;
        }

        .output-content {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 30px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .btn {
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .no-code {
            opacity: 0.6;
            pointer-events: none;
        }

        .experiment-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .social-link {
            position: relative;
            display: inline-block;
        }

        .social-link::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.6s ease;
            z-index: 0;
        }

        .social-link:hover::before {
            width: 80px;
            height: 80px;
        }

        .social-link > div {
            position: relative;
            z-index: 1;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }

        .social-link:hover > div {
            animation: pulse 2s infinite;
        }

        #experimentsCount, #linesOfCode, #algorithms {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="code-pattern">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-5xl font-bold text-white mb-4 drop-shadow-lg">S3 DSA Lab Experiments</h1>
            <p class="text-xl text-white opacity-90">Data Structures and Algorithms - Lab Experiments</p>
        </header>


        <!-- Experiments Grid -->
        <div id="experiments-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12">
            <!-- Experiments will be dynamically loaded here -->
        </div>

        <!-- Source Code Link -->
        <div class="text-center mb-8">
            <a href="https://github.com/dariogeorge21/S3DSAlgo/tree/main/experiments"
               target="_blank"
               class="inline-block bg-white text-purple-700 font-semibold px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
                <svg class="inline-block w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0110 4.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.137 18.165 20 14.418 20 10c0-5.523-4.477-10-10-10z"/>
                </svg>
                View Source on GitHub
            </a>
        </div>

        <!-- Footer -->
        <footer class="text-center py-12 mt-16 border-t border-white border-opacity-20">
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-white mb-4">Connect with Me</h3>
                <p class="text-white opacity-80 mb-6">Let's connect and collaborate on exciting projects!</p>
            </div>
            
            <!-- Social Links -->
            <div class="flex justify-center items-center space-x-8 mb-8">
                <!-- GitHub -->
                <a href="https://github.com/dariogeorge21" 
                   target="_blank" 
                   class="social-link group relative">
                    <div class="bg-white bg-opacity-10 backdrop-blur-sm p-4 rounded-full border border-white border-opacity-20 transition-all duration-500 group-hover:bg-opacity-20 group-hover:scale-110 group-hover:shadow-xl">
                        <svg class="w-8 h-8 text-white transition-transform duration-300 group-hover:rotate-12" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                    </div>
                    <span class="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white px-3 py-1 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">GitHub</span>
                </a>

                <!-- LinkedIn -->
                <a href="https://www.linkedin.com/in/dariogeorge21/" 
                   target="_blank" 
                   class="social-link group relative">
                    <div class="bg-white bg-opacity-10 backdrop-blur-sm p-4 rounded-full border border-white border-opacity-20 transition-all duration-500 group-hover:bg-opacity-20 group-hover:scale-110 group-hover:shadow-xl">
                        <svg class="w-8 h-8 text-white transition-transform duration-300 group-hover:rotate-12" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </div>
                    <span class="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white px-3 py-1 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">LinkedIn</span>
                </a>

                <!-- X -->
                <a href="https://x.com/dariogeorge21" 
                   target="_blank" 
                   class="social-link group relative">
                    <div class="bg-white bg-opacity-10 backdrop-blur-sm p-4 rounded-full border border-white border-opacity-20 transition-all duration-500 group-hover:bg-opacity-20 group-hover:scale-110 group-hover:shadow-xl">
                        <svg class="w-8 h-8 text-white transition-transform duration-300 group-hover:rotate-12" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </div>
                    <span class="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white px-3 py-1 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">Twitter</span>
                </a>

                <!-- Instagram -->
                <a href="https://instagram.com/dariogeorge21" 
                   target="_blank" 
                   class="social-link group relative">
                    <div class="bg-white bg-opacity-10 backdrop-blur-sm p-4 rounded-full border border-white border-opacity-20 transition-all duration-500 group-hover:bg-opacity-20 group-hover:scale-110 group-hover:shadow-xl">
                        <svg class="w-8 h-8 text-white transition-transform duration-300 group-hover:rotate-12" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                        </svg>
                    </div>
                    <span class="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white px-3 py-1 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">Instagram</span>
                </a>

                <!-- Email -->
                <a href="mailto:edu.dariogeorge21@gmail.com" 
                   class="social-link group relative">
                    <div class="bg-white bg-opacity-10 backdrop-blur-sm p-4 rounded-full border border-white border-opacity-20 transition-all duration-500 group-hover:bg-opacity-20 group-hover:scale-110 group-hover:shadow-xl">
                        <svg class="w-8 h-8 text-white transition-transform duration-300 group-hover:rotate-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 7.89a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <span class="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white px-3 py-1 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">Email</span>
                </a>
            </div>

            <!-- Name and Bio -->
            <div class="mb-6">
                <h2 class="text-3xl font-bold text-white mb-2">Dario George</h2>
            </div>

            <!-- Copyright -->
            <div class="border-t border-white border-opacity-20 pt-6">
                <p class="text-white opacity-60 text-sm">
                    © 2025 Dario George. Made with ❤️ for learning DSA concepts.
                </p>
            </div>
        </footer>
    </div>

    <!-- Code Modal -->
    <div id="codeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="codeModalTitle" class="text-2xl font-bold">Code</h2>
                <div class="flex items-center gap-3">
                    <button onclick="copyCode()" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2">
                        <svg id="copyIcon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        <span id="copyText">Copy Code</span>
                    </button>
                    <span class="close" onclick="closeModal('codeModal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <pre class="line-numbers"><code id="codeContent" class="language-c"></code></pre>
            </div>
        </div>
    </div>

    <!-- Output Modal -->
    <div id="outputModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="outputModalTitle" class="text-2xl font-bold">Output</h2>
                <span class="close" onclick="closeModal('outputModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="outputContent" class="output-content"></div>
            </div>
        </div>
    </div>

    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>


    <script>
        // Experiment metadata
        const experiments = {
            '1': { title: 'Polynomials', file: '01 - Polynomials.c' },
            '2': { title: 'Sparse Matrix', file: '02 - Sparse Matrix.c' },
            '3': { title: 'Infix to Postfix', file: '03 - Infix to Postfix.c' },
            '4a': { title: 'Linear Queue', file: '04a - Linear Queue.c' },
            '4b': { title: 'Double Ended Queue', file: '04b - Double Ended Queue.c' },
            '5': { title: 'Circular Queue', file: '05 - Circular Queue.c' },
            '6': { title: 'Browser Navigation', file: '06 - Browser Navigation.c' },
            '7': { title: 'Polynomials using Linked List', file: '07 - Polynomials using linked list.c' },
            '8': { title: 'Binary Tree', file: '08 - Binary Tree.c' },
            '9': { title: 'Binary Search Tree', file: '09 - Binary Search Tree.c' },
            '10': { title: 'Breadth First Search', file: '10 - Breadth First Search.c' },
            '11': { title: 'Not Known', file: null },
            '12': { title: 'Binary Search', file: '12 - Binary Search.c' },
            '13a': { title: 'Bubble Sort', file: '13a - Bubble Sort.c' },
            '13b': { title: 'Insertion Sort', file: '13b - Insertion Sort.c' },
            '13c': { title: 'Quick Sort', file: '13c - Quick Sort.c' },
            '13d': { title: 'Merge Sort', file: '13d - Merge Sort.c' },
            '14': { title: 'Memory Allocation', file: '14 - Memory allocation.c' },
            '15': { title: 'Garbage Collector', file: '15 - Garbage Collector.c' },
            '16': { title: 'Hash Table', file: '16 - Hash Table.c' }
        };

        // Group experiments by main number
        const experimentGroups = [
            { num: 1, exps: ['1'] },
            { num: 2, exps: ['2'] },
            { num: 3, exps: ['3'] },
            { num: 4, exps: ['4a', '4b'] },
            { num: 5, exps: ['5'] },
            { num: 6, exps: ['6'] },
            { num: 7, exps: ['7'] },
            { num: 8, exps: ['8'] },
            { num: 9, exps: ['9'] },
            { num: 10, exps: ['10'] },
            { num: 11, exps: ['11'] },
            { num: 12, exps: ['12'] },
            { num: 13, exps: ['13a', '13b', '13c', '13d'] },
            { num: 14, exps: ['14'] },
            { num: 15, exps: ['15'] },
            { num: 16, exps: ['16'] }
        ];

        let outputsData = null;

        // Load outputs.json
        async function loadOutputs() {
            try {
                const response = await fetch('outputs.json');
                outputsData = await response.json();
            } catch (error) {
                console.error('Error loading outputs:', error);
                outputsData = { experiments: {} };
            }
        }

        // Initialize the page
        async function init() {
            await loadOutputs();
            renderExperiments();
        }

        // Render experiment cards
        function renderExperiments() {
            const grid = document.getElementById('experiments-grid');

            experimentGroups.forEach(group => {
                const card = document.createElement('div');
                card.className = 'card rounded-xl shadow-lg p-6';

                const hasCode = group.exps.some(exp => experiments[exp].file !== null);

                let subExperimentsHTML = '';
                if (group.exps.length > 1) {
                    subExperimentsHTML = '<div class="mt-3 space-y-2">';
                    group.exps.forEach(exp => {
                        const expData = experiments[exp];
                        if (expData.file) {
                            subExperimentsHTML += `
                                <div class="text-sm border-l-2 border-purple-500 pl-3">
                                    <div class="font-medium text-gray-700">${exp.toUpperCase()}: ${expData.title}</div>
                                    <div class="flex gap-2 mt-1">
                                        <button onclick="viewCode('${exp}')" class="btn text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">Code</button>
                                        <button onclick="viewOutput('${exp}')" class="btn text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600">Output</button>
                                        <button onclick="copyCodeDirect('${exp}')" class="btn text-xs bg-orange-500 text-white px-2 py-1 rounded hover:bg-orange-600">Copy</button>
                                        <button onclick="downloadCode('${exp}')" class="btn text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600">Download</button>
                                    </div>
                                </div>
                            `;
                        }
                    });
                    subExperimentsHTML += '</div>';
                }

                const mainExp = group.exps[0];
                const mainExpData = experiments[mainExp];

                card.innerHTML = `
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <h3 class="text-3xl font-bold experiment-number">Exp ${group.num}</h3>
                            <p class="text-gray-600 font-medium mt-1">${mainExpData.title}</p>
                        </div>
                    </div>

                    ${!hasCode ? '<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3"><p class="text-yellow-800 text-sm font-medium">⚠️ No code available</p></div>' : ''}

                    ${group.exps.length === 1 && hasCode ? `
                        <div class="flex flex-wrap gap-2">
                            <button onclick="viewCode('${mainExp}')" class="btn bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 font-medium text-sm">
                                View Code
                            </button>
                            <button onclick="viewOutput('${mainExp}')" class="btn bg-green-500 text-white px-3 py-2 rounded-lg hover:bg-green-600 font-medium text-sm">
                                View Output
                            </button>
                            <button onclick="copyCodeDirect('${mainExp}')" class="btn bg-orange-500 text-white px-3 py-2 rounded-lg hover:bg-orange-600 font-medium text-sm">
                                Copy Code
                            </button>
                            <button onclick="downloadCode('${mainExp}')" class="btn bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 font-medium text-sm">
                                Download
                            </button>
                        </div>
                    ` : subExperimentsHTML}
                `;

                grid.appendChild(card);
            });
        }

        // View code in modal
        async function viewCode(expId) {
            const exp = experiments[expId];
            if (!exp.file) return;

            try {
                const response = await fetch(`experiments/${exp.file}`);
                const code = await response.text();

                document.getElementById('codeModalTitle').textContent = `${expId.toUpperCase()}: ${exp.title}`;
                document.getElementById('codeContent').textContent = code;

                // Re-highlight the code
                Prism.highlightElement(document.getElementById('codeContent'));

                openModal('codeModal');
            } catch (error) {
                alert('Error loading code: ' + error.message);
            }
        }


        // View output in modal
        function viewOutput(expId) {
            const exp = experiments[expId];
            const output = outputsData?.experiments?.[expId];

            if (!output) {
                alert('Output not available for this experiment');
                return;
            }

            document.getElementById('outputModalTitle').textContent = `${expId.toUpperCase()}: ${exp.title} - Output`;
            document.getElementById('outputContent').textContent = output.output;

            openModal('outputModal');
        }

        // Copy code from modal
        function copyCode() {
            const codeContent = document.getElementById('codeContent').textContent;
            
            navigator.clipboard.writeText(codeContent).then(() => {
                // Visual feedback
                const copyIcon = document.getElementById('copyIcon');
                const copyText = document.getElementById('copyText');
                
                // Change to checkmark
                copyIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';
                copyText.textContent = 'Copied!';
                
                // Reset after 2 seconds
                setTimeout(() => {
                    copyIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>';
                    copyText.textContent = 'Copy Code';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy code: ', err);
                alert('Failed to copy code to clipboard');
            });
        }

        // Copy code directly without opening modal
        async function copyCodeDirect(expId) {
            const exp = experiments[expId];
            if (!exp.file) return;

            try {
                const response = await fetch(`experiments/${exp.file}`);
                const code = await response.text();
                
                await navigator.clipboard.writeText(code);
                
                // Create temporary toast notification
                showToast(`Code for ${exp.title} copied to clipboard!`);
                
            } catch (error) {
                console.error('Failed to copy code: ', error);
                alert('Failed to copy code to clipboard');
            }
        }

        // Show toast notification
        function showToast(message) {
            // Remove existing toast if any
            const existingToast = document.getElementById('toast');
            if (existingToast) {
                existingToast.remove();
            }

            // Create toast
            const toast = document.createElement('div');
            toast.id = 'toast';
            toast.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-x-full';
            toast.innerHTML = `
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                toast.style.transform = 'translateX(full)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // Download code
        async function downloadCode(expId) {
            const exp = experiments[expId];
            if (!exp.file) return;

            try {
                const response = await fetch(`experiments/${exp.file}`);
                const code = await response.text();

                const blob = new Blob([code], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = exp.file;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
            } catch (error) {
                alert('Error downloading code: ' + error.message);
            }
        }

        // Open modal
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = 'auto';
            }
        });

        // Animated counter for stats
        function animateCounter(element, target, duration = 2000) {
            const start = 0;
            const increment = target / (duration / 16); // 60fps
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current);
            }, 16);
        }

        // Initialize counters when footer is visible
        function initializeCounters() {
            const footer = document.querySelector('footer');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Animate the counters
                        setTimeout(() => animateCounter(document.getElementById('experimentsCount'), 16), 200);
                        setTimeout(() => animateCounter(document.getElementById('linesOfCode'), 2500), 400);
                        setTimeout(() => animateCounter(document.getElementById('algorithms'), 25), 600);
                        
                        // Add "+" suffix to lines of code after animation
                        setTimeout(() => {
                            document.getElementById('linesOfCode').textContent = '2500+';
                            document.getElementById('algorithms').textContent = '25+';
                        }, 2800);
                        
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(footer);
        }

        // Add floating animation to social links
        function addFloatingAnimation() {
            const socialLinks = document.querySelectorAll('.social-link');
            
            socialLinks.forEach((link, index) => {
                // Add staggered floating animation
                link.style.animation = `float 3s ease-in-out infinite ${index * 0.2}s`;
            });
        }

        // Add floating keyframes to CSS
        function addFloatingKeyframes() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-5px); }
                }
                
                .social-link:hover {
                    animation-play-state: paused;
                }
            `;
            document.head.appendChild(style);
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            init();
            initializeCounters();
            addFloatingKeyframes();
            setTimeout(addFloatingAnimation, 1000); // Start floating after page loads
        });
    </script>
</body>
</html>
